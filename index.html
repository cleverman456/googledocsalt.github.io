<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title id="tabTitle">FoundryGames</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link id="favicon" rel="icon" href="./imgs/favicon.ico">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
/* (UNCHANGED STYLES ‚Äî trimmed for clarity) */
*{box-sizing:border-box;margin:0;padding:0}
html{height:100%;background:#0f1115}
body{min-height:100vh;font-family:Inter,sans-serif;color:#fff;overflow-x:hidden}

#stars{position:fixed;inset:0;z-index:0;pointer-events:none}
.site{position:relative;z-index:1}

header{text-align:center;padding:40px 20px 24px}
header h1{font-size:2.6rem;font-weight:700}
header p{font-size:1.1rem;color:#9aa0aa;margin-top:6px}

.search-wrap{
  margin:18px auto 0;
  max-width:520px;
  display:flex;
  gap:10px;
}
.search-wrap input{
  flex:1;
  padding:12px 16px;
  border-radius:14px;
  border:none;
  background:#1c1f28;
  color:#fff;
}
.search-wrap button{
  padding:12px 16px;
  border-radius:14px;
  border:none;
  background:#2c3040;
  color:#fff;
  cursor:pointer;
}

/* NEW: proxy bar */
.proxy-wrap{
  margin:10px auto 0;
  max-width:520px;
  display:flex;
  gap:10px;
}

.games-wrapper{max-width:1300px;margin:auto;padding:20px}
.games-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:18px}

.game-card{background:#161922;border-radius:18px;overflow:hidden;cursor:pointer;transition:.2s}
.game-card:hover{transform:translateY(-6px)}

.game-thumb{height:150px;background:#222 center/cover;position:relative}
.play-overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.35);font-weight:700;font-size:1.1rem;opacity:0}
.game-card:hover .play-overlay{opacity:1}

.modal-bg{position:fixed;inset:0;background:rgba(0,0,0,.85);display:flex;align-items:center;justify-content:center;z-index:1000}
.modal-window{width:92%;max-width:1100px;height:84%;background:#181b24;border-radius:16px;display:flex;flex-direction:column}
.modal-header,.modal-footer{padding:16px;background:#20232d;display:flex;justify-content:space-between}
.game-frame{flex:1;border:none}
</style>
</head>

<body>
<canvas id="stars"></canvas>

<div class="site">
<header>
  <h1>FoundryGames</h1>
  <p>Instant play. No limits. Just games.</p>

  <!-- GAME SEARCH (unchanged) -->
  <div class="search-wrap">
    <input id="search" placeholder="Search games...">
    <button onclick="openSettings()">‚öô</button>
  </div>

  <!-- üî• NEW: PROXY SEARCH -->
  <div class="proxy-wrap">
    <input id="proxyInput" placeholder="Search or enter URL (example.com)">
    <button onclick="openProxy()">üåê</button>
  </div>
</header>

<main class="games-wrapper">
  <div class="games-grid" id="grid"></div>
</main>
</div>

<!-- üî• Ultraviolet scripts -->
<script src="http://localhost:8080/uv/uv.bundle.js"></script>
<script src="http://localhost:8080/uv/uv.config.js"></script>

<script>
/* REGISTER UV SERVICE WORKER */
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register(
    "http://localhost:8080/uv/uv.sw.js",
    { scope: "/uv/" }
  );
}

/* üî• PANIC KEY */
document.addEventListener("keydown", e => {
  if (e.key === "Escape") {
    document.title = "Google Docs";
    favicon.href = "https://upload.wikimedia.org/wikipedia/commons/e/ec/GDocs_Favicon_Recreation.png";
    location.replace("https://docs.google.com");
  }
});

/* üî• OPEN EXTERNAL SITE VIA PROXY */
function openProxy(){
  let val = proxyInput.value.trim();
  if (!val) return;

  if (!val.includes("://")) val = "https://" + val;

  const encoded = __uv$config.prefix + __uv$config.encodeUrl(val);
  openModal(encoded, val);
}

/* MODAL HANDLER */
function openModal(src, title){
  const m=document.createElement("div");
  m.className="modal-bg";
  m.innerHTML=`
    <div class="modal-window">
      <div class="modal-header">
        <span>${title}</span>
        <span onclick="this.closest('.modal-bg').remove()">‚úñ</span>
      </div>
      <iframe src="${src}" class="game-frame"></iframe>
      <div class="modal-footer">
        <button onclick="this.closest('.modal-bg').remove()">Close</button>
        <button onclick="document.querySelector('.game-frame').requestFullscreen()">‚õ∂ Fullscreen</button>
      </div>
    </div>`;
  document.body.appendChild(m);
}

/* ‚ö†Ô∏è IMPORTANT:
   YOUR openGame() FUNCTION
   AND ALL ASSETS LOGIC
   REMAINS 100% UNCHANGED
*/
</script>

</body>
</html>
